[debug] [2024-05-09T11:03:54.396Z] ----------------------------------------------------------------------
[debug] [2024-05-09T11:03:54.398Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\catar\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only storage --debug
[debug] [2024-05-09T11:03:54.398Z] CLI Version:   13.8.0
[debug] [2024-05-09T11:03:54.399Z] Platform:      win32
[debug] [2024-05-09T11:03:54.399Z] Node Version:  v18.20.2
[debug] [2024-05-09T11:03:54.401Z] Time:          Thu May 09 2024 12:03:54 GMT+0100 (Hora de verÃ£o da Europa Ocidental)
[debug] [2024-05-09T11:03:54.401Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-05-09T11:03:54.474Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-05-09T11:03:54.475Z] > authorizing via signed-in user (catarinaroseta.dev@gmail.com)
[debug] [2024-05-09T11:03:54.475Z] [iam] checking project le-shopping-list for permissions ["firebase.projects.get","firebaserules.releases.create","firebaserules.releases.update","firebaserules.rulesets.create"]
[debug] [2024-05-09T11:03:54.477Z] > refreshing access token with scopes: []
[debug] [2024-05-09T11:03:54.479Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2024-05-09T11:03:54.479Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-05-09T11:03:54.690Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2024-05-09T11:03:54.690Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2024-05-09T11:03:54.697Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/le-shopping-list:testIamPermissions [none]
[debug] [2024-05-09T11:03:54.697Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/le-shopping-list:testIamPermissions x-goog-quota-user=projects/le-shopping-list
[debug] [2024-05-09T11:03:54.698Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/le-shopping-list:testIamPermissions {"permissions":["firebase.projects.get","firebaserules.releases.create","firebaserules.releases.update","firebaserules.rulesets.create"]}
[debug] [2024-05-09T11:03:55.475Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/le-shopping-list:testIamPermissions 200
[debug] [2024-05-09T11:03:55.476Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/le-shopping-list:testIamPermissions {"permissions":["firebase.projects.get","firebaserules.releases.create","firebaserules.releases.update","firebaserules.rulesets.create"]}
[info] 
[info] === Deploying to 'le-shopping-list'...
[info] 
[info] i  deploying storage 
[info] i  storage: ensuring required API firebasestorage.googleapis.com is enabled... 
[debug] [2024-05-09T11:03:55.479Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/le-shopping-list/services/firebasestorage.googleapis.com [none]
[debug] [2024-05-09T11:03:55.479Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/le-shopping-list/services/firebasestorage.googleapis.com x-goog-quota-user=projects/le-shopping-list
[debug] [2024-05-09T11:03:56.389Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/le-shopping-list/services/firebasestorage.googleapis.com 200
[debug] [2024-05-09T11:03:56.389Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/le-shopping-list/services/firebasestorage.googleapis.com [omitted]
[info] +  storage: required API firebasestorage.googleapis.com is enabled 
[debug] [2024-05-09T11:03:56.390Z] >>> [apiv2][query] GET https://firebasestorage.googleapis.com/v1alpha/projects/le-shopping-list/defaultBucket [none]
[debug] [2024-05-09T11:03:57.004Z] <<< [apiv2][status] GET https://firebasestorage.googleapis.com/v1alpha/projects/le-shopping-list/defaultBucket 200
[debug] [2024-05-09T11:03:57.004Z] <<< [apiv2][body] GET https://firebasestorage.googleapis.com/v1alpha/projects/le-shopping-list/defaultBucket {"name":"projects/le-shopping-list/defaultBucket","location":"US","bucket":{"name":"projects/le-shopping-list/buckets/le-shopping-list.appspot.com"}}
[info] i  firebase.storage: checking storage.rules for compilation errors... 
[debug] [2024-05-09T11:03:57.006Z] >>> [apiv2][query] POST https://firebaserules.googleapis.com/v1/projects/le-shopping-list:test [none]
[debug] [2024-05-09T11:03:57.007Z] >>> [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/le-shopping-list:test [omitted]
[debug] [2024-05-09T11:03:57.788Z] <<< [apiv2][status] POST https://firebaserules.googleapis.com/v1/projects/le-shopping-list:test 200
[debug] [2024-05-09T11:03:57.788Z] <<< [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/le-shopping-list:test {}
[info] +  firebase.storage: rules file storage.rules compiled successfully 
[debug] [2024-05-09T11:03:57.790Z] >>> [apiv2][query] GET https://firebaserules.googleapis.com/v1/projects/le-shopping-list/releases pageSize=10&pageToken=
[debug] [2024-05-09T11:03:58.520Z] <<< [apiv2][status] GET https://firebaserules.googleapis.com/v1/projects/le-shopping-list/releases 200
[debug] [2024-05-09T11:03:58.521Z] <<< [apiv2][body] GET https://firebaserules.googleapis.com/v1/projects/le-shopping-list/releases {"releases":[{"name":"projects/le-shopping-list/releases/cloud.firestore","rulesetName":"projects/le-shopping-list/rulesets/570989af-5ea9-4516-b870-705d7a7aeea3","createTime":"2024-05-07T13:29:41.883932Z","updateTime":"2024-05-09T10:37:21.742716Z"},{"name":"projects/le-shopping-list/releases/firebase.storage/le-shopping-list.appspot.com","rulesetName":"projects/le-shopping-list/rulesets/369f8a16-2415-4d09-9141-4f563fa914c1","createTime":"2024-05-07T13:30:46.139506Z","updateTime":"2024-05-07T13:30:46.139506Z"}]}
[debug] [2024-05-09T11:03:58.531Z] >>> [apiv2][query] GET https://firebaserules.googleapis.com/v1/projects/le-shopping-list/rulesets/369f8a16-2415-4d09-9141-4f563fa914c1 [none]
[debug] [2024-05-09T11:03:59.264Z] <<< [apiv2][status] GET https://firebaserules.googleapis.com/v1/projects/le-shopping-list/rulesets/369f8a16-2415-4d09-9141-4f563fa914c1 200
[debug] [2024-05-09T11:03:59.265Z] <<< [apiv2][body] GET https://firebaserules.googleapis.com/v1/projects/le-shopping-list/rulesets/369f8a16-2415-4d09-9141-4f563fa914c1 [omitted]
[debug] [2024-05-09T11:03:59.267Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/le-shopping-list [none]
[debug] [2024-05-09T11:03:59.567Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/le-shopping-list 200
[debug] [2024-05-09T11:03:59.568Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/le-shopping-list {"projectId":"le-shopping-list","projectNumber":"183288219769","displayName":"Le Shopping list","name":"projects/le-shopping-list","resources":{"hostingSite":"le-shopping-list","storageBucket":"le-shopping-list.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_11d7ae06-6b2c-4d47-9024-abd00c15750c"}
[debug] [2024-05-09T11:03:59.569Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/183288219769:getIamPolicy [none]
[debug] [2024-05-09T11:04:00.373Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/183288219769:getIamPolicy 200
[debug] [2024-05-09T11:04:00.373Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/183288219769:getIamPolicy {"version":1,"etag":"BwYX3TEkIxo=","bindings":[{"role":"roles/editor","members":["serviceAccount:le-shopping-list@appspot.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-183288219769@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-183288219769@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firebasestorage.serviceAgent","members":["serviceAccount:service-183288219769@gcp-sa-firebasestorage.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-183288219769@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:catarinaroseta.dev@gmail.com"]},{"role":"roles/storage.admin","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]}]}
[debug] [2024-05-09T11:04:09.020Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/183288219769:getIamPolicy [none]
[debug] [2024-05-09T11:04:09.888Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/183288219769:getIamPolicy 200
[debug] [2024-05-09T11:04:09.889Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/183288219769:getIamPolicy {"version":1,"etag":"BwYX3TEkIxo=","bindings":[{"role":"roles/editor","members":["serviceAccount:le-shopping-list@appspot.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-183288219769@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-183288219769@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firebasestorage.serviceAgent","members":["serviceAccount:service-183288219769@gcp-sa-firebasestorage.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-183288219769@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:catarinaroseta.dev@gmail.com"]},{"role":"roles/storage.admin","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]}]}
[debug] [2024-05-09T11:04:09.890Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/183288219769:setIamPolicy [none]
[debug] [2024-05-09T11:04:09.890Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/183288219769:setIamPolicy {"policy":{"version":1,"etag":"BwYX3TEkIxo=","bindings":[{"role":"roles/editor","members":["serviceAccount:le-shopping-list@appspot.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-183288219769@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-183288219769@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firebasestorage.serviceAgent","members":["serviceAccount:service-183288219769@gcp-sa-firebasestorage.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-183288219769@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:catarinaroseta.dev@gmail.com"]},{"role":"roles/storage.admin","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.firestoreServiceAgent","members":["serviceAccount:service-183288219769@gcp-sa-firebasestorage.iam.gserviceaccount.com"]}]},"updateMask":"bindings"}
[debug] [2024-05-09T11:04:11.583Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/183288219769:setIamPolicy 200
[debug] [2024-05-09T11:04:11.583Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/183288219769:setIamPolicy {"version":1,"etag":"BwYYA2D8wMw=","bindings":[{"role":"roles/editor","members":["serviceAccount:le-shopping-list@appspot.gserviceaccount.com"]},{"role":"roles/firebase.managementServiceAgent","members":["serviceAccount:firebase-service-account@firebase-sa-management.iam.gserviceaccount.com","serviceAccount:service-183288219769@gcp-sa-firebase.iam.gserviceaccount.com"]},{"role":"roles/firebase.sdkAdminServiceAgent","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]},{"role":"roles/firebaseauth.admin","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.firestoreServiceAgent","members":["serviceAccount:service-183288219769@gcp-sa-firebasestorage.iam.gserviceaccount.com"]},{"role":"roles/firebaserules.system","members":["serviceAccount:service-183288219769@firebase-rules.iam.gserviceaccount.com"]},{"role":"roles/firebasestorage.serviceAgent","members":["serviceAccount:service-183288219769@gcp-sa-firebasestorage.iam.gserviceaccount.com"]},{"role":"roles/firestore.serviceAgent","members":["serviceAccount:service-183288219769@gcp-sa-firestore.iam.gserviceaccount.com"]},{"role":"roles/iam.serviceAccountTokenCreator","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]},{"role":"roles/owner","members":["user:catarinaroseta.dev@gmail.com"]},{"role":"roles/storage.admin","members":["serviceAccount:firebase-adminsdk-s5p2u@le-shopping-list.iam.gserviceaccount.com"]}]}
[info] i  storage: updated service account for cross-service rules... 
[info] i  storage: uploading rules storage.rules... 
[debug] [2024-05-09T11:04:11.585Z] >>> [apiv2][query] POST https://firebaserules.googleapis.com/v1/projects/le-shopping-list/rulesets [none]
[debug] [2024-05-09T11:04:11.586Z] >>> [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/le-shopping-list/rulesets [omitted]
[debug] [2024-05-09T11:04:11.989Z] <<< [apiv2][status] POST https://firebaserules.googleapis.com/v1/projects/le-shopping-list/rulesets 200
[debug] [2024-05-09T11:04:11.989Z] <<< [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/le-shopping-list/rulesets {"name":"projects/le-shopping-list/rulesets/4d34df14-3850-489f-9b3a-448d688a9e08","source":{"files":[{"content":"rules_version = '2';\n\n// Craft rules based on data in your Firestore database\n// allow write: if firestore.get(\n//    /databases/(default)/documents/users/$(request.auth.uid)).data.isAdmin;\nservice firebase.storage {\n  match /b/{bucket}/o {\n    match /shoppingLists/{userId}/{document=**} {\n      allow read, create: if request.auth != null;\n      allow delete: if request.auth.uid == userId;\n    }\n  }\n}\n","name":"storage.rules"}]},"createTime":"2024-05-09T11:04:11.804655Z","metadata":{"services":["firebase.storage"]}}
[debug] [2024-05-09T11:04:11.990Z] [rules] created ruleset projects/le-shopping-list/rulesets/4d34df14-3850-489f-9b3a-448d688a9e08
[debug] [2024-05-09T11:04:11.991Z] [rules] releasing firebase.storage/le-shopping-list.appspot.com with ruleset projects/le-shopping-list/rulesets/4d34df14-3850-489f-9b3a-448d688a9e08
[debug] [2024-05-09T11:04:11.991Z] >>> [apiv2][query] PATCH https://firebaserules.googleapis.com/v1/projects/le-shopping-list/releases/firebase.storage/le-shopping-list.appspot.com [none]
[debug] [2024-05-09T11:04:11.992Z] >>> [apiv2][body] PATCH https://firebaserules.googleapis.com/v1/projects/le-shopping-list/releases/firebase.storage/le-shopping-list.appspot.com {"release":{"name":"projects/le-shopping-list/releases/firebase.storage/le-shopping-list.appspot.com","rulesetName":"projects/le-shopping-list/rulesets/4d34df14-3850-489f-9b3a-448d688a9e08"}}
[debug] [2024-05-09T11:04:12.882Z] <<< [apiv2][status] PATCH https://firebaserules.googleapis.com/v1/projects/le-shopping-list/releases/firebase.storage/le-shopping-list.appspot.com 200
[debug] [2024-05-09T11:04:12.883Z] <<< [apiv2][body] PATCH https://firebaserules.googleapis.com/v1/projects/le-shopping-list/releases/firebase.storage/le-shopping-list.appspot.com {"name":"projects/le-shopping-list/releases/firebase.storage/le-shopping-list.appspot.com","rulesetName":"projects/le-shopping-list/rulesets/4d34df14-3850-489f-9b3a-448d688a9e08","createTime":"2024-05-07T13:30:46.139506Z","updateTime":"2024-05-09T11:04:12.703474Z"}
[debug] [2024-05-09T11:04:12.883Z] [rules] updated release projects/le-shopping-list/releases/firebase.storage/le-shopping-list.appspot.com
[info] +  storage: released rules storage.rules to firebase.storage 
[info] 
[info] +  Deploy complete! 
[info] 
[info] Project Console: https://console.firebase.google.com/project/le-shopping-list/overview
